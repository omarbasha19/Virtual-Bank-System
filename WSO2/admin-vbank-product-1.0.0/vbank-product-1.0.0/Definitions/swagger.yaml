openapi: 3.0.1
info:
  title: vbank-product
  version: 1.0.0
servers:
 -
  url: /
security:
 -
  default: []
paths:
  /register:
    post:
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserRegistration"
        required: true
      responses:
        "201":
          description: User created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"
        "409":
          description: Username or email already exists
      security:
       -
        default: []
      x-auth-type: Application & Application User
      x-throttling-tier: Unlimited
  /login:
    post:
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserLogin"
        required: true
      responses:
        "200":
          description: Authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoginResponse"
        "401":
          description: Invalid credentials
      security:
       -
        default: []
      x-auth-type: Application & Application User
      x-throttling-tier: Unlimited
  /dashboard/{userId}:
    get:
      parameters:
       -
        name: userId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: Dashboard data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Dashboard"
        "404":
          description: User not found
      security:
       -
        default: []
      x-auth-type: Application & Application User
      x-throttling-tier: Unlimited
  /transfer/initiation:
    post:
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TransferRequestInitiation"
        required: true
      responses:
        "200":
          description: Transfer initiation success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransferResponse"
        "400":
          description: Invalid account or insufficient funds
      security:
       -
        default: []
      x-auth-type: Application & Application User
      x-throttling-tier: Unlimited
  /transfer/execution:
    post:
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TransferRequestExecution"
        required: true
      responses:
        "200":
          description: Transfer executed successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransferResponse"
        "400":
          description: Invalid account or insufficient funds
      security:
       -
        default: []
      x-auth-type: Application & Application User
      x-throttling-tier: Unlimited
components:
  schemas:
    Dashboard:
      type: object
      properties:
        userId:
          type: string
        username:
          type: string
        email:
          type: string
        firstname:
          type: string
        lastname:
          type: string
        accounts:
          type: array
          items:
            type: object
            properties:
              accountId:
                type: string
              accountType:
                type: string
              accountNumber:
                type: string
              balance:
                type: number
              transactions:
                type: array
                items:
                  type: object
                  properties:
                    transactionId:
                      type: string
                    amount:
                      type: number
                      format: double
                    toAccountId:
                      type: string
                    description:
                      type: string
                    timestamp:
                      type: string
                      format: date-time
    UserResponse:
      type: object
      properties:
        userId:
          type: string
        username:
          type: string
        message:
          type: string
    LoginResponse:
      type: object
      properties:
        userId:
          type: string
        username:
          type: string
    UserRegistration:
      type: object
      properties:
        username:
          type: string
        password:
          type: string
        email:
          type: string
        firstName:
          type: string
        lastName:
          type: string
    UserLogin:
      type: object
      properties:
        username:
          type: string
        password:
          type: string
    TransferResponse:
      type: object
      properties:
        transactionId:
          type: string
        status:
          type: string
          enum:
           - INITIATED
           - FAILED
           - SUCCESS
        timestamp:
          type: string
          format: date-time
    TransferRequestInitiation:
      required:
       - amount
       - fromAccountId
       - toAccountId
      type: object
      properties:
        fromAccountId:
          type: string
        toAccountId:
          type: string
        amount:
          type: number
          format: double
        description:
          type: string
    TransferRequestExecution:
      required:
       - transactionId
      type: object
      properties:
        transactionId:
          type: string
          description: Required only for execution step
  securitySchemes:
    default:
      type: oauth2
      flows:
        implicit:
          authorizationUrl: https://test.com
          scopes: {}
          x-scopes-bindings: {}
